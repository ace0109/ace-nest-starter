# ==================== 应用配置 ====================
NODE_ENV=development
PORT=3000

# ==================== 数据库配置 ====================
# PostgreSQL 16 Alpine + Prisma
# 格式: postgresql://用户名:密码@主机:端口/数据库名?schema=public
DATABASE_URL=postgresql://postgres:postgres123@localhost:5432/ace_nest_db?schema=public

# 测试数据库 (E2E 测试使用独立数据库)
# 可选: 如果不配置，测试将使用主数据库 (不推荐)
# DATABASE_URL_TEST=postgresql://postgres:postgres123@localhost:5432/ace_nest_db_test?schema=public

# Docker Compose 默认配置:
# - 镜像: postgres:16-alpine
# - 用户名: postgres
# - 密码: postgres123
# - 数据库: ace_nest_db
# - 端口: 5432

# ==================== JWT 配置 ====================
# Access Token (短期访问令牌)
JWT_ACCESS_SECRET=your-super-secret-access-key-at-least-32-characters-long
JWT_ACCESS_EXPIRES_IN=2h

# Refresh Token (长期刷新令牌)
JWT_REFRESH_SECRET=your-super-secret-refresh-key-at-least-32-characters-long
JWT_REFRESH_EXPIRES_IN=30d

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==================== 限流配置 ====================
# 全局限流 (所有接口)
THROTTLE_TTL=60          # 时间窗口（秒）
THROTTLE_LIMIT=100       # 时间窗口内最大请求数

# 认证接口限流 (登录/注册)
THROTTLE_AUTH_TTL=60     # 时间窗口（秒）
THROTTLE_AUTH_LIMIT=5    # 时间窗口内最大请求数

# API接口限流 (业务接口)
THROTTLE_API_TTL=60      # 时间窗口（秒）
THROTTLE_API_LIMIT=50    # 时间窗口内最大请求数

# 是否使用Redis存储限流记录 (建议生产环境开启)
THROTTLE_USE_REDIS=true  # true: 使用Redis存储（集群环境必须）, false: 使用内存存储（仅单机）

# ==================== SMTP 邮件配置 (可选) ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@example.com

# ==================== CORS 配置 ====================
# 多个域名用逗号分隔
CORS_ORIGINS=http://localhost:3001,https://example.com

# ==================== 日志配置 ====================
# fatal | error | warn | info | debug | trace
LOG_LEVEL=info

# ==================== Google OAuth (可选) ====================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/oauth/google/callback

# ==================== GitHub OAuth (可选) ====================
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_CALLBACK_URL=http://localhost:3000/auth/oauth/github/callback

# ==================== 微信 OAuth (可选) ====================
WECHAT_APP_ID=
WECHAT_APP_SECRET=
